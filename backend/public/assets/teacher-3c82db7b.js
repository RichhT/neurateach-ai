import{r as a,u as B,a as P,j as e,L as E,b as y,c as O,A as I,B as z,R as W,d as D,N as R,e as L,f as _,g as H}from"./index-3590ac61.js";function $(){console.log("Welcome component rendering");const[s,o]=a.useState("login"),[t,l]=a.useState({email:"",password:"",name:"",confirmPassword:""}),[g,d]=a.useState(""),[j,c]=a.useState(!1),{login:n,register:m}=B(),w=P(),b=v=>{l({...t,[v.target.name]:v.target.value})},S=async v=>{if(v.preventDefault(),c(!0),d(""),s==="register"){if(t.password!==t.confirmPassword){d("Passwords do not match"),c(!1);return}const f=await m(t.name,t.email,t.password,"teacher");f.success?w("/dashboard"):d(f.error)}else{const f=await n(t.email,t.password);f.success?w("/dashboard"):d(f.error)}c(!1)},r={container:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},header:{padding:"40px 0",textAlign:"center",position:"relative"},backHome:{position:"absolute",left:"20px",top:"50%",transform:"translateY(-50%)",color:"rgba(255,255,255,0.9)",textDecoration:"none",fontWeight:"500"},title:{fontSize:"3rem",fontWeight:"700",marginBottom:"10px",textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},subtitle:{fontSize:"1.2rem",opacity:.9},content:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px"},hero:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"60px",alignItems:"center",minHeight:"70vh"},heroText:{fontSize:"2.5rem",marginBottom:"30px",fontWeight:"600"},featureList:{listStyle:"none",padding:0},featureItem:{fontSize:"1.2rem",marginBottom:"15px",padding:"10px 0",opacity:.95},authSection:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"40px",boxShadow:"0 20px 40px rgba(0,0,0,0.1)"},authTabs:{display:"flex",marginBottom:"30px",background:"#f8f9fa",borderRadius:"10px",padding:"5px"},tab:{flex:1,padding:"12px 20px",border:"none",background:"transparent",borderRadius:"8px",fontWeight:"600",color:"#6c757d",cursor:"pointer"},tabActive:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",boxShadow:"0 2px 10px rgba(102, 126, 234, 0.3)"},authForm:{color:"#333"},formGroup:{marginBottom:"20px"},label:{display:"block",marginBottom:"8px",fontWeight:"600",color:"#495057"},input:{width:"100%",padding:"15px",border:"2px solid #e9ecef",borderRadius:"10px",fontSize:"16px"},authButton:{width:"100%",padding:"15px",fontSize:"16px",fontWeight:"600",borderRadius:"10px",border:"none",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",cursor:"pointer",boxShadow:"0 5px 15px rgba(102, 126, 234, 0.4)"},error:{background:"#f8d7da",color:"#721c24",padding:"12px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #f5c6cb"}};return e.jsxs("div",{style:r.container,children:[e.jsxs("div",{style:r.header,children:[e.jsx(E,{to:"/",style:r.backHome,children:"â† Back to Home"}),e.jsx("h1",{style:r.title,children:"Teacher Portal"}),e.jsx("p",{style:r.subtitle,children:"Empower your teaching with AI-driven curriculum tools"})]}),e.jsx("div",{style:r.content,children:e.jsxs("div",{style:r.hero,children:[e.jsxs("div",{children:[e.jsx("h2",{style:r.heroText,children:"Transform Your Classroom"}),e.jsxs("ul",{style:r.featureList,children:[e.jsx("li",{style:r.featureItem,children:"ðŸ“š Upload and organize curriculum materials"}),e.jsx("li",{style:r.featureItem,children:"ðŸŽ¯ Generate AI-powered learning objectives"}),e.jsx("li",{style:r.featureItem,children:"ðŸ“Š Track student progress and performance"}),e.jsx("li",{style:r.featureItem,children:"ðŸ§© Create adaptive assessments"}),e.jsx("li",{style:r.featureItem,children:"ðŸ“ˆ Get detailed analytics and insights"})]})]}),e.jsxs("div",{style:r.authSection,children:[e.jsxs("div",{style:r.authTabs,children:[e.jsx("button",{style:{...r.tab,...s==="login"?r.tabActive:{}},onClick:()=>o("login"),children:"Login"}),e.jsx("button",{style:{...r.tab,...s==="register"?r.tabActive:{}},onClick:()=>o("register"),children:"Register"})]}),e.jsxs("div",{style:r.authForm,children:[g&&e.jsx("div",{style:r.error,children:g}),e.jsxs("form",{onSubmit:S,children:[s==="register"&&e.jsxs("div",{style:r.formGroup,children:[e.jsx("label",{htmlFor:"name",style:r.label,children:"Full Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:b,required:!0,placeholder:"Enter your full name",style:r.input})]}),e.jsxs("div",{style:r.formGroup,children:[e.jsx("label",{htmlFor:"email",style:r.label,children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:b,required:!0,placeholder:"Enter your email",style:r.input})]}),e.jsxs("div",{style:r.formGroup,children:[e.jsx("label",{htmlFor:"password",style:r.label,children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:b,required:!0,placeholder:"Enter your password",style:r.input})]}),s==="register"&&e.jsxs("div",{style:r.formGroup,children:[e.jsx("label",{htmlFor:"confirmPassword",style:r.label,children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:b,required:!0,placeholder:"Confirm your password",style:r.input})]}),e.jsx("button",{type:"submit",style:r.authButton,disabled:j,children:j?s==="login"?"Logging in...":"Creating account...":s==="login"?"Login to Dashboard":"Create Teacher Account"})]})]})]})]})})]})}function G(){const[s,o]=a.useState([]),[t,l]=a.useState(!0),[g,d]=a.useState("");a.useEffect(()=>{j()},[]);const j=async()=>{try{const n=await y.get("/api/units");o(n.data)}catch(n){d("Failed to fetch units"),console.error("Error fetching units:",n)}finally{l(!1)}},c=async n=>{if(window.confirm("Are you sure you want to delete this unit?"))try{await y.delete(`/api/units/${n}`),o(s.filter(m=>m.id!==n))}catch(m){d("Failed to delete unit"),console.error("Error deleting unit:",m)}};return t?e.jsx("div",{className:"loading",children:"Loading your units..."}):(console.log("Teacher Dashboard rendering with units:",s.length),console.log("Teacher Dashboard error state:",g),e.jsxs("div",{style:{padding:"20px",backgroundColor:"white",minHeight:"100vh"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsx("h1",{children:"Your Learning Units"}),e.jsx(E,{to:"/upload",className:"btn btn-primary",children:"Upload New Curriculum"})]}),g&&e.jsx("div",{className:"error",children:g}),s.length===0?e.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[e.jsx("h3",{children:"No units yet"}),e.jsx("p",{children:"Upload your first curriculum document to get started!"}),e.jsx(E,{to:"/upload",className:"btn btn-primary",children:"Upload Curriculum"})]}):e.jsx("div",{style:{display:"grid",gap:"1rem"},children:s.map(n=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{children:n.name}),n.description&&e.jsx("p",{style:{color:"#666",margin:"0.5rem 0"},children:n.description}),e.jsxs("p",{style:{color:"#888",fontSize:"0.9rem"},children:[n.objectives.length," learning objectives"]})]}),e.jsxs("div",{children:[e.jsx(E,{to:`/units/${n.id}`,className:"btn btn-primary",style:{marginRight:"0.5rem"},children:"View Details"}),e.jsx("button",{onClick:()=>c(n.id),className:"btn btn-secondary",children:"Delete"})]})]}),n.objectives.length>0&&e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:"Recent Objectives:"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem"},children:[n.objectives.slice(0,3).map(m=>e.jsx("li",{style:{marginBottom:"0.25rem"},children:m.objective_text},m.id)),n.objectives.length>3&&e.jsxs("li",{style:{color:"#666",fontStyle:"italic"},children:["... and ",n.objectives.length-3," more"]})]})]})]},n.id))})]}))}function q(){const[s,o]=a.useState(null),[t,l]=a.useState([]),[g,d]=a.useState(""),[j,c]=a.useState(""),[n,m]=a.useState(!1),[w,b]=a.useState(!1),[S,r]=a.useState(""),[v,f]=a.useState(!1),U=P(),T=h=>{const p=h.target.files[0];if(p){if(!["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"].includes(p.type)){r("Please select a PDF or Word document");return}o(p),r("")}},i=async()=>{var p,x;if(!s){r("Please select a file first");return}m(!0),r("");const h=new FormData;h.append("file",s);try{const k=await y.post("/api/uploads",h,{headers:{"Content-Type":"multipart/form-data"}});l(k.data.objectives),b(!0),d(`${s.name.split(".")[0]} Unit`)}catch(k){r(((x=(p=k.response)==null?void 0:p.data)==null?void 0:x.error)||"Error processing file"),console.error("Error processing file:",k)}finally{m(!1)}},u=(h,p)=>{const x=[...t];x[h]=p,l(x)},N=()=>{l([...t,""])},F=h=>{l(t.filter((p,x)=>x!==h))},C=async()=>{var h,p;if(!g.trim()){r("Please enter a unit name");return}if(t.filter(x=>x.trim()).length===0){r("Please add at least one learning objective");return}f(!0),r("");try{const x=await y.post("/api/units",{name:g.trim(),description:j.trim(),objectives:t.filter(k=>k.trim())});U(`/units/${x.data.id}`)}catch(x){r(((p=(h=x.response)==null?void 0:h.data)==null?void 0:p.error)||"Error saving unit"),console.error("Error saving unit:",x)}finally{f(!1)}};return e.jsxs("div",{children:[e.jsx("h1",{style:{marginBottom:"2rem"},children:"Upload Curriculum"}),S&&e.jsx("div",{className:"error",children:S}),w?e.jsx("div",{children:e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Step 2: Review & Edit Learning Objectives"}),e.jsx("p",{children:"AI has generated learning objectives from your curriculum. Review and edit them as needed."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"unitName",children:"Unit Name"}),e.jsx("input",{type:"text",id:"unitName",value:g,onChange:h=>d(h.target.value),placeholder:"Enter unit name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"unitDescription",children:"Unit Description (Optional)"}),e.jsx("textarea",{id:"unitDescription",value:j,onChange:h=>c(h.target.value),placeholder:"Enter unit description"})]}),e.jsx("h4",{children:"Learning Objectives:"}),t.map((h,p)=>e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem",alignItems:"flex-start"},children:[e.jsx("span",{style:{minWidth:"2rem",padding:"0.5rem",background:"#f0f0f0",textAlign:"center",borderRadius:"4px"},children:p+1}),e.jsx("textarea",{value:h,onChange:x=>u(p,x.target.value),style:{flex:1,minHeight:"60px"},placeholder:"Enter learning objective"}),e.jsx("button",{onClick:()=>F(p),className:"btn btn-secondary",style:{padding:"0.5rem"},children:"Ã—"})]},p)),e.jsx("div",{style:{margin:"1rem 0"},children:e.jsx("button",{onClick:N,className:"btn btn-secondary",children:"Add Objective"})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[e.jsx("button",{onClick:C,className:"btn btn-primary",disabled:v,children:v?"Saving...":"Save Unit"}),e.jsx("button",{onClick:()=>{b(!1),l([]),o(null)},className:"btn btn-secondary",children:"Start Over"})]})]})}):e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Step 1: Upload Document"}),e.jsx("p",{children:"Upload a PDF or Word document containing your curriculum content."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"file",children:"Select File"}),e.jsx("input",{type:"file",id:"file",accept:".pdf,.doc,.docx",onChange:T}),s&&e.jsxs("p",{style:{marginTop:"0.5rem",color:"#666"},children:["Selected: ",s.name]})]}),e.jsx("button",{onClick:i,className:"btn btn-primary",disabled:!s||n,children:n?"Processing...":"Process Document"}),n&&e.jsxs("div",{style:{marginTop:"1rem",color:"#666"},children:[e.jsx("p",{children:"Processing your document with AI..."}),e.jsx("p",{children:"This may take a few moments."})]})]})]})}function Y(){const{id:s}=O(),o=P(),[t,l]=a.useState(null),[g,d]=a.useState(!0),[j,c]=a.useState(""),[n,m]=a.useState(!1),[w,b]=a.useState(null);a.useEffect(()=>{S()},[s]);const S=async()=>{try{const i=await y.get(`/api/units/${s}`);l(i.data)}catch(i){c("Failed to fetch unit details"),console.error("Error fetching unit:",i)}finally{d(!1)}},r=async i=>{try{const u=await y.put(`/api/units/${s}`,i);l({...t,...u.data}),m(!1)}catch(u){c("Failed to update unit"),console.error("Error updating unit:",u)}},v=async(i,u)=>{var N;try{const F=await y.put(`/api/objectives/${i}`,{objective_text:u,order_index:((N=t.objectives.find(C=>C.id===i))==null?void 0:N.order_index)||0});l({...t,objectives:t.objectives.map(C=>C.id===i?F.data:C)}),b(null)}catch(F){c("Failed to update objective"),console.error("Error updating objective:",F)}},f=async()=>{const i=prompt("Enter new learning objective:");if(i)try{const u=await y.post("/api/objectives",{unit_id:s,objective_text:i,order_index:t.objectives.length});l({...t,objectives:[...t.objectives,u.data]})}catch(u){c("Failed to add objective"),console.error("Error adding objective:",u)}},U=async i=>{if(window.confirm("Are you sure you want to delete this objective?"))try{await y.delete(`/api/objectives/${i}`),l({...t,objectives:t.objectives.filter(u=>u.id!==i)})}catch(u){c("Failed to delete objective"),console.error("Error deleting objective:",u)}},T=async()=>{if(window.confirm("Are you sure you want to delete this entire unit? This cannot be undone."))try{await y.delete(`/api/units/${s}`),o("/dashboard")}catch(i){c("Failed to delete unit"),console.error("Error deleting unit:",i)}};return g?e.jsx("div",{className:"loading",children:"Loading unit details..."}):t?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsx("div",{children:e.jsx(E,{to:"/dashboard",style:{color:"#666",textDecoration:"none"},children:"â† Back to Dashboard"})}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>m(!n),className:"btn btn-secondary",style:{marginRight:"0.5rem"},children:n?"Cancel Edit":"Edit Unit"}),e.jsx("button",{onClick:T,className:"btn btn-secondary",children:"Delete Unit"})]})]}),j&&e.jsx("div",{className:"error",children:j}),e.jsx("div",{className:"card",children:n?e.jsx(M,{unit:t,onSave:r,onCancel:()=>m(!1)}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:t.name}),t.description&&e.jsx("p",{style:{color:"#666",fontSize:"1.1rem",marginBottom:"1rem"},children:t.description}),e.jsxs("p",{style:{color:"#888",fontSize:"0.9rem"},children:["Created: ",new Date(t.created_at).toLocaleDateString()]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("h2",{children:["Learning Objectives (",t.objectives.length,")"]}),e.jsx("button",{onClick:f,className:"btn btn-primary",children:"Add Objective"})]}),t.objectives.length===0?e.jsx("p",{style:{color:"#666",textAlign:"center",padding:"2rem"},children:'No learning objectives yet. Click "Add Objective" to get started.'}):e.jsx("div",{children:t.objectives.map((i,u)=>e.jsx(V,{objective:i,index:u,isEditing:w===i.id,onEdit:()=>b(i.id),onSave:N=>v(i.id,N),onCancel:()=>b(null),onDelete:()=>U(i.id)},i.id))})]})]}):e.jsxs("div",{className:"card",children:[e.jsx("h2",{children:"Unit not found"}),e.jsx(E,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})}function M({unit:s,onSave:o,onCancel:t}){const[l,g]=a.useState(s.name),[d,j]=a.useState(s.description||""),c=n=>{n.preventDefault(),o({name:l,description:d})};return e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Unit Name"}),e.jsx("input",{type:"text",id:"name",value:l,onChange:n=>g(n.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",value:d,onChange:n=>j(n.target.value)})]}),e.jsxs("div",{children:[e.jsx("button",{type:"submit",className:"btn btn-primary",style:{marginRight:"0.5rem"},children:"Save Changes"}),e.jsx("button",{type:"button",onClick:t,className:"btn btn-secondary",children:"Cancel"})]})]})}function V({objective:s,index:o,isEditing:t,onEdit:l,onSave:g,onCancel:d,onDelete:j}){const[c,n]=a.useState(s.objective_text),m=()=>{c.trim()&&g(c.trim())};return e.jsx("div",{style:{border:"1px solid #ddd",borderRadius:"4px",padding:"1rem",marginBottom:"0.5rem",backgroundColor:t?"#f9f9f9":"white"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[e.jsx("span",{style:{minWidth:"2rem",padding:"0.25rem 0.5rem",background:"#007bff",color:"white",borderRadius:"4px",fontSize:"0.9rem"},children:o+1}),e.jsx("div",{style:{flex:1},children:t?e.jsxs("div",{children:[e.jsx("textarea",{value:c,onChange:w=>n(w.target.value),style:{width:"100%",minHeight:"80px",marginBottom:"0.5rem"}}),e.jsxs("div",{children:[e.jsx("button",{onClick:m,className:"btn btn-primary",style:{marginRight:"0.5rem"},children:"Save"}),e.jsx("button",{onClick:d,className:"btn btn-secondary",children:"Cancel"})]})]}):e.jsx("p",{style:{margin:0,lineHeight:"1.5"},children:s.objective_text})}),!t&&e.jsxs("div",{children:[e.jsx("button",{onClick:l,className:"btn btn-secondary",style:{marginRight:"0.5rem",padding:"0.25rem 0.5rem",fontSize:"0.8rem"},children:"Edit"}),e.jsx("button",{onClick:j,className:"btn btn-secondary",style:{padding:"0.25rem 0.5rem",fontSize:"0.8rem"},children:"Delete"})]})]})})}function A({children:s}){const{user:o,loading:t}=B();return t?e.jsx("div",{className:"loading",style:{padding:"50px",textAlign:"center"},children:"Loading..."}):o?o.userType!=="teacher"?(window.location.href="/student",null):s:e.jsx(L,{to:""})}function J({children:s}){const{user:o,loading:t}=B();return t?e.jsx("div",{className:"loading",style:{padding:"50px",textAlign:"center"},children:"Loading..."}):o&&o.userType==="teacher"?e.jsx(L,{to:"dashboard"}):o&&o.userType!=="teacher"?(window.location.href="/student",null):s}function K(){return e.jsx(I,{children:e.jsx(z,{basename:"/teacher",children:e.jsx("div",{className:"App",children:e.jsxs(W,{children:[e.jsx(D,{path:"/",element:e.jsx(J,{children:e.jsx($,{})})}),e.jsx(D,{path:"/dashboard",element:e.jsx(A,{children:e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsx("main",{className:"container",children:e.jsx(G,{})})]})})}),e.jsx(D,{path:"/upload",element:e.jsx(A,{children:e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsx("main",{className:"container",children:e.jsx(q,{})})]})})}),e.jsx(D,{path:"/units/:id",element:e.jsx(A,{children:e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsx("main",{className:"container",children:e.jsx(Y,{})})]})})})]})})})})}_.createRoot(document.getElementById("root")).render(e.jsx(H.StrictMode,{children:e.jsx(K,{})}));
